<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="datacraft blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="datacraft blog Atom Feed"><title data-react-helmet="true">Un petit mémo à propos de Kubernetes | datacraft blog</title><meta data-react-helmet="true" property="og:title" content="Un petit mémo à propos de Kubernetes | datacraft blog"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://drkapichu.github.io//img/datacraft-team-3.JPG"><meta data-react-helmet="true" name="twitter:image" content="https://drkapichu.github.io//img/datacraft-team-3.JPG"><meta data-react-helmet="true" name="description" content="Here goes a short description of this post"><meta data-react-helmet="true" property="og:description" content="Here goes a short description of this post"><meta data-react-helmet="true" property="og:url" content="https://drkapichu.github.io//blog/sense4data-kubernetes"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" name="keywords" content="kubernetes,scalabilité verticale,scalabilité horizontale,orchestrateur de conteneurs"><link data-react-helmet="true" rel="icon" href="/img/datacraft_logo.png"><link data-react-helmet="true" rel="canonical" href="https://drkapichu.github.io//blog/sense4data-kubernetes"><link data-react-helmet="true" rel="alternate" href="https://drkapichu.github.io//blog/sense4data-kubernetes" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://drkapichu.github.io//blog/sense4data-kubernetes" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.29cd2889.css">
<link rel="preload" href="/assets/js/runtime~main.23ef1fa4.js" as="script">
<link rel="preload" href="/assets/js/main.200c38ba.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/datacraft_logo_full.png" alt=" " class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/datacraft_logo_full.png" alt=" " class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/opensource">Open Source</a></div><div class="navbar__items navbar__items--right"><a href="https://datacraft.paris/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">datacraft website</a><a href="http://eepurl.com/hfkB9z" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Newsletter</a><a href="https://github.com/datacraft-paris" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Github</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper"><div class="container container-wide margin-vert--lg"><div class="row"><div class="col col--2"></div><main class="col col--8"><article><header><h1 class="margin-bottom--sm blogPostTitle_RC3s">Un petit mémo à propos de Kubernetes</h1><div class="margin-vert--md"><p>Here goes a short description of this post</p><time datetime="2022-04-21T00:00:00.000Z" class="blogPostDate_IAgm">April<!-- --> <!-- -->21<!-- -->, <!-- -->2022<!-- --> <!-- --> · <!-- -->5<!-- --> min read</time></div><div class="avatar margin-vert--md"><div class="avatar__intro"><h4 class="avatar__name">Written by <a href="mailto:julien.guyot@datacraft.paris" target="_blank" rel="noreferrer noopener">Julien Guyot</a></h4><small class="avatar__subtitle">Data Scientist</small></div></div><div class="margin-vert--md"><img class="img-blog-header" src="/img/blog/AIFairness-benchathon4.jpg"></div></header><section class="markdown blog-article-custom"><hr><header><h1>Pourquoi Kubernetes ?</h1></header><p>Sorti pour la première fois en 2015, <a href="https://en.wikipedia.org/wiki/Kubernetes" target="_blank" rel="noopener noreferrer">Kubernetes</a> est devenu la solution d’orchestration de conteneurs privilégiée par les entreprises. Pourquoi cela ?<br>
<!-- -->Imaginez une application que vous mettez en ligne. A mesure qu’elle devient populaire, elle doit pouvoir être ‘requêtée’ de manière massive et, dans son ensemble, elle traite des volumes de données de plus en plus gros. Une tension apparaît alors sur deux caractéristiques de la machine :</p><ul><li>Vitesse de calcul : d’une part le CPU ne peut pas gérer toutes les demandes des utilisateurs dans un temps raisonnable,</li><li>Capacité mémoire : d’autre part la RAM du CPU ne peut pas supporter l’ensemble des données de tous les utilisateurs. @fig1:descr</li></ul><p>Il n’existe que deux façons de gérer ce problème de capacité (cf <a href="#Figure1">Figure 1</a>).<br>
<!-- -->Avant la généralisation des technologies de conteneurs, la solution la plus adoptée était la <strong>scalabilité verticale</strong> : on prenait une machine plus puissante. C&#x27;est-à-dire avec un CPU plus performant, voire un GPU, et une RAM plus grande (e.g. 32Gb, 64Gb, jusqu’à 1Tb). Mais c’est une stratégie du “toujours plus puissant” qui peut rapidement atteindre ses limites, dont la première est le coût qui grandit de manière quasi-exponentielle (voir graphe à droite de la <a href="#Figure1">Figure 1</a>).<a name="Figure1"></a><br>
<!-- -->Pour remédier à ça, on peut pratiquer la <strong>scalabilité horizontale</strong> : on met deux machines en parallèle et on répartit le travail sur chacune. Ça a aussi un coût financier, mais passée une certaine limite il est moindre que celui de la scalabilité verticale. Par contre il faut maintenir plusieurs machines : les mettre à jour et installer les librairies deux fois, i.e. s’assurer qu’elles offrent le même environnement fonctionnel à l’application. Pire, si on veut avoir des redondances pour pallier l’arrêt imprévu d’une machine, voire des deux, on doit s’occuper de quatre machines à minima !</p><p>Kubernetes, également appelé k8s, fait partie des technologies qui ont rendu la scalabilité horizontale très facilement applicable.</p><p><img alt="Figure1" src="/assets/images/Figure1-scalabilites-635f99c3421602777aef7d8886d3cc75.png" title="Illustration des scalabilités verticale et horizontale."></p><div style="text-align:center;margin-left:9em;margin-right:9em;margin-bottom:5em">Figure 1 : Illustration des scalabilités verticale et horizontale.</div><header><h1>Principes de base de k8s.</h1></header><p>Le fonctionnement de Kubernetes repose sur une <strong>stratégie de microservices conteneurisés</strong>.<br>
<!-- -->Pour préciser les choses, nous allons maintenant préciser quelques fonctionnalités de notre application. Imaginez qu’elle prend des informations clients qu’elle compare à une base de données pour des programmes de fidélité, et, en même temps, elle dispose d’un algorithme de recommandation qui doit proposer un contenu adapté à l’utilisateur selon les produits disponibles d’après une autre base de données. Voilà déjà une application assez complexe.</p><p>Auparavant, une telle application était construite de façon dite ‘monolithique’ (voir Figure 2, panneau de gauche). C’est à dire que les différentes fonctionnalités de l’application n’étaient pas forcément indépendantes et surtout elles tournaient toutes sur la même machine ; celle que l’on voulait toujours plus puissante.
La stratégie de micro-services consiste à construire chacune des fonctionnalités - ou chacun des services - de manière indépendante des autres, par une “petite” équipe autonome. Les équipes n’ont qu’à s’accorder sur un standard de communication entre les services et éventuellement à le faire évoluer progressivement. Chaque micro-service tourne ensuite sur un serveur dédié et peut être indépendamment scalable et déployable.  </p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Vocabulaire  </h5></div><div class="admonition-content"><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_vU9c tabs__item--active">Indépendamment scalable</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_vU9c">Indépendamment déployable</li></ul><div class="margin-vert--md"><div role="tabpanel">S’il y a une trop grande tension pour accéder à la base de données des utilisateurs par exemple et que ce service devient trop lent, on peut augmenter le nombre de machines dédiées à ce service seulement et répartir la charge sans affecter les autres.</div><div role="tabpanel" hidden="">Si on améliore l’algorithme de recommandation de contenu, on peut redéployer ce service seulement puis arrêter les serveurs qui font tourner l’ancien algorithme progressivement ; comme ce service est indépendant des autres, la seule précaution à prendre est de s’assurer que leur standard de communication est toujours valide.</div></div></div></div></div><p>Cette stratégie de microservices représente la scalabilité horizontale. Toutefois, faire tourner le même service sur plusieurs serveurs, ça implique de maintenir toutes ces machines et de s’assurer qu’elles fournissent toutes le même environnement au service en question, i.e. mêmes librairies avec les mêmes versions. Et c’est là que la conteneurisation devient un atout majeur. Pour chaque service il suffit d’écrire toutes les exigences de librairies dans un fichier, puis de lancer un conteneur Docker à partir de ce fichier.<br>
<!-- -->Au passage cela règle un autre problème présenté sur le panneau de droite de la Figure 2. Différentes applications installées sur un même serveur pouvaient avoir besoin des mêmes librairies mais avec des versions différentes, qui elles-mêmes pouvaient appeler différentes versions d’autres librairies. Et les équipes techniques devaient trouver les moyens de les installer toutes de manière concurrente et de s’assurer que les bonnes versions étaient appelées au bon moment. La conteneurisation enlève tout simplement ce problème.  </p><p>En conclusion, <strong>k8s</strong> est un moyen unique et simple de gérer une myriade de micro-services interconnectés de manière conteneurisée, c’est un <strong>orchestrateur de conteneurs</strong>.</p><p><img alt="Figure 2" src="/assets/images/Figure2-conteneurisation-05be0e48c070b150b99fa7752c9cd96f.png" title="Figure 2"></p><div style="text-align:center;margin-left:9em;margin-right:9em;margin-bottom:5em">Figure 2 : Write some text here... This fig is too small, make it different.</div></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/kubernetes">kubernetes</a><a class="margin-horiz--sm" href="/blog/tags/conteneurs">conteneurs</a><a class="margin-horiz--sm" href="/blog/tags/scalabilite-verticale-horizontale">scalabilité verticale/horizontale</a><a class="margin-horiz--sm" href="/blog/tags/orchestrateur-de-conteneurs">orchestrateur de conteneurs</a></div></footer></article><div class="margin-vert--xl"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/AI-Fairness-et-benchathon2"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Fairness in AI - How a benchathon unlocked our knowledge<!-- --> »</div></a></div></nav></div></main><div class="col col--2"><div class="tableOfContents_vrFS thin-scrollbar"></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">About us</div><ul class="footer__items"><li class="footer__item"><a href="https://datacraft.paris/about-us/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Who we are ?</a></li><li class="footer__item"><a href="http://eepurl.com/hfkB9z" target="_blank" rel="noopener noreferrer" class="footer__link-item">Subscribe to our newsletter</a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/assets/js/runtime~main.23ef1fa4.js"></script>
<script src="/assets/js/main.200c38ba.js"></script>
</body>
</html>