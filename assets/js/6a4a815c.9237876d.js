"use strict";(self.webpackChunkdrkapichu=self.webpackChunkdrkapichu||[]).push([[1676],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=u(n),m=a,v=d["".concat(l,".").concat(m)]||d[m]||p[m]||i;return n?r.createElement(v,s(s({ref:t},c),{},{components:n})):r.createElement(v,s({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,s=new Array(i);s[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:a,s[1]=o;for(var u=2;u<i;u++)s[u]=n[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8215:function(e,t,n){var r=n(7294);t.Z=function(e){var t=e.children,n=e.hidden,a=e.className;return r.createElement("div",{role:"tabpanel",hidden:n,className:a},t)}},6396:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(3117),a=n(7294),i=n(2389),s=n(9443);var o=function(){var e=(0,a.useContext)(s.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},l=n(3810),u=n(6010),c="tabItem_vU9c";function p(e){var t,n,i,s=e.lazy,p=e.block,d=e.defaultValue,m=e.values,v=e.groupId,f=e.className,b=a.Children.map(e.children,(function(e){if((0,a.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),g=null!=m?m:b.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),h=(0,l.lx)(g,(function(e,t){return e.value===t.value}));if(h.length>0)throw new Error('Docusaurus error: Duplicate values "'+h.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var k=null===d?d:null!=(t=null!=d?d:null==(n=b.find((function(e){return e.props.default})))?void 0:n.props.value)?t:null==(i=b[0])?void 0:i.props.value;if(null!==k&&!g.some((function(e){return e.value===k})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+k+'" but none of its children has the corresponding value. Available values are: '+g.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var y=o(),w=y.tabGroupChoices,N=y.setTabGroupChoices,q=(0,a.useState)(k),x=q[0],T=q[1],O=[],E=(0,l.o5)().blockElementScrollPositionUntilNextRender;if(null!=v){var j=w[v];null!=j&&j!==x&&g.some((function(e){return e.value===j}))&&T(j)}var P=function(e){var t=e.currentTarget,n=O.indexOf(t),r=g[n].value;r!==x&&(E(t),T(r),null!=v&&N(v,r))},I=function(e){var t,n=null;switch(e.key){case"ArrowRight":var r=O.indexOf(e.currentTarget)+1;n=O[r]||O[0];break;case"ArrowLeft":var a=O.indexOf(e.currentTarget)-1;n=O[a]||O[O.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,u.Z)("tabs",{"tabs--block":p},f)},g.map((function(e){var t=e.value,n=e.label,i=e.attributes;return a.createElement("li",(0,r.Z)({role:"tab",tabIndex:x===t?0:-1,"aria-selected":x===t,key:t,ref:function(e){return O.push(e)},onKeyDown:I,onFocus:P,onClick:P},i,{className:(0,u.Z)("tabs__item",c,null==i?void 0:i.className,{"tabs__item--active":x===t})}),null!=n?n:t)}))),s?(0,a.cloneElement)(b.filter((function(e){return e.props.value===x}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},b.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==x})}))))}function d(e){var t=(0,i.Z)();return a.createElement(p,(0,r.Z)({key:String(t)},e))}},8397:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return u},contentTitle:function(){return c},metadata:function(){return p},assets:function(){return d},toc:function(){return m},default:function(){return f}});var r=n(3117),a=n(102),i=(n(7294),n(3905)),s=n(6396),o=n(8215),l=["components"],u={slug:"sense4data-kubernetes",title:"Un petit m\xe9mo \xe0 propos de Kubernetes",author:"Julien Guyot",author_title:"Data Scientist",author_url:"mailto:julien.guyot@datacraft.paris",header_image_url:"img/blog/AIFairness-benchathon4.jpg",tags:["kubernetes","conteneurs","scalabilit\xe9 verticale/horizontale","orchestrateur de conteneurs"],description:"Here goes a short description of this post",keywords:["kubernetes","scalabilit\xe9 verticale","scalabilit\xe9 horizontale","orchestrateur de conteneurs"]},c=void 0,p={permalink:"/blog/sense4data-kubernetes",editUrl:"https://github.com/DrKapichu/drkapichu.github.io/tree/main/blog/blog/2022-04-21-Kubernetes.md",source:"@site/blog/2022-04-21-Kubernetes.md",title:"Un petit m\xe9mo \xe0 propos de Kubernetes",description:"Here goes a short description of this post",date:"2022-04-21T00:00:00.000Z",formattedDate:"April 21, 2022",tags:[{label:"kubernetes",permalink:"/blog/tags/kubernetes"},{label:"conteneurs",permalink:"/blog/tags/conteneurs"},{label:"scalabilit\xe9 verticale/horizontale",permalink:"/blog/tags/scalabilite-verticale-horizontale"},{label:"orchestrateur de conteneurs",permalink:"/blog/tags/orchestrateur-de-conteneurs"}],readingTime:4.4,truncated:!0,authors:[{name:"Julien Guyot",title:"Data Scientist",url:"mailto:julien.guyot@datacraft.paris"}],prevItem:{title:"Fairness in AI - Identify and tackle biases",permalink:"/blog/Article-Eliot"},nextItem:{title:"Fairness in AI - How a benchathon unlocked our knowledge",permalink:"/blog/AI-Fairness-et-benchathon2"}},d={authorsImageUrls:[void 0]},m=[],v={toc:m};function f(e){var t=e.components,u=(0,a.Z)(e,l);return(0,i.kt)("wrapper",(0,r.Z)({},v,u,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("hr",null),(0,i.kt)("h1",{id:"pourquoi-kubernetes-"},"Pourquoi Kubernetes ?"),(0,i.kt)("p",null,"Sorti pour la premi\xe8re fois en 2015, ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Kubernetes"},"Kubernetes")," est devenu la solution d\u2019orchestration de conteneurs privil\xe9gi\xe9e par les entreprises. Pourquoi cela ?",(0,i.kt)("br",{parentName:"p"}),"\n","Imaginez une application que vous mettez en ligne. A mesure qu\u2019elle devient populaire, elle doit pouvoir \xeatre \u2018requ\xeat\xe9e\u2019 de mani\xe8re massive et, dans son ensemble, elle traite des volumes de donn\xe9es de plus en plus gros. Une tension appara\xeet alors sur deux caract\xe9ristiques de la machine :"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Vitesse de calcul : d\u2019une part le CPU ne peut pas g\xe9rer toutes les demandes des utilisateurs dans un temps raisonnable,"),(0,i.kt)("li",{parentName:"ul"},"Capacit\xe9 m\xe9moire : d\u2019autre part la RAM du CPU ne peut pas supporter l\u2019ensemble des donn\xe9es de tous les utilisateurs. @fig1:descr")),(0,i.kt)("p",null,"Il n\u2019existe que deux fa\xe7ons de g\xe9rer ce probl\xe8me de capacit\xe9 (cf ",(0,i.kt)("a",{parentName:"p",href:"#Figure1"},"Figure 1"),").",(0,i.kt)("br",{parentName:"p"}),"\n","Avant la g\xe9n\xe9ralisation des technologies de conteneurs, la solution la plus adopt\xe9e \xe9tait la ",(0,i.kt)("strong",{parentName:"p"},"scalabilit\xe9 verticale")," : on prenait une machine plus puissante. C'est-\xe0-dire avec un CPU plus performant, voire un GPU, et une RAM plus grande (e.g. 32Gb, 64Gb, jusqu\u2019\xe0 1Tb). Mais c\u2019est une strat\xe9gie du \u201ctoujours plus puissant\u201d qui peut rapidement atteindre ses limites, dont la premi\xe8re est le co\xfbt qui grandit de mani\xe8re quasi-exponentielle (voir graphe \xe0 droite de la ",(0,i.kt)("a",{parentName:"p",href:"#Figure1"},"Figure 1"),").",(0,i.kt)("a",{name:"Figure1"}),(0,i.kt)("br",{parentName:"p"}),"\n","Pour rem\xe9dier \xe0 \xe7a, on peut pratiquer la ",(0,i.kt)("strong",{parentName:"p"},"scalabilit\xe9 horizontale")," : on met deux machines en parall\xe8le et on r\xe9partit le travail sur chacune. \xc7a a aussi un co\xfbt financier, mais pass\xe9e une certaine limite il est moindre que celui de la scalabilit\xe9 verticale. Par contre il faut maintenir plusieurs machines : les mettre \xe0 jour et installer les librairies deux fois, i.e. s\u2019assurer qu\u2019elles offrent le m\xeame environnement fonctionnel \xe0 l\u2019application. Pire, si on veut avoir des redondances pour pallier l\u2019arr\xeat impr\xe9vu d\u2019une machine, voire des deux, on doit s\u2019occuper de quatre machines \xe0 minima !"),(0,i.kt)("p",null,"Kubernetes, \xe9galement appel\xe9 k8s, fait partie des technologies qui ont rendu la scalabilit\xe9 horizontale tr\xe8s facilement applicable."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Figure1",src:n(4063).Z,title:"Illustration des scalabilit\xe9s verticale et horizontale."})),(0,i.kt)("div",{style:{textAlign:"center",marginLeft:"9em",marginRight:"9em",marginBottom:"5em"}},"Figure 1 : Illustration des scalabilit\xe9s verticale et horizontale."),(0,i.kt)("h1",{id:"principes-de-base-de-k8s"},"Principes de base de k8s."),(0,i.kt)("p",null,"Le fonctionnement de Kubernetes repose sur une ",(0,i.kt)("strong",{parentName:"p"},"strat\xe9gie de microservices conteneuris\xe9s"),".",(0,i.kt)("br",{parentName:"p"}),"\n","Pour pr\xe9ciser les choses, nous allons maintenant pr\xe9ciser quelques fonctionnalit\xe9s de notre application. Imaginez qu\u2019elle prend des informations clients qu\u2019elle compare \xe0 une base de donn\xe9es pour des programmes de fid\xe9lit\xe9, et, en m\xeame temps, elle dispose d\u2019un algorithme de recommandation qui doit proposer un contenu adapt\xe9 \xe0 l\u2019utilisateur selon les produits disponibles d\u2019apr\xe8s une autre base de donn\xe9es. Voil\xe0 d\xe9j\xe0 une application assez complexe."),(0,i.kt)("p",null,"Auparavant, une telle application \xe9tait construite de fa\xe7on dite \u2018monolithique\u2019 (voir Figure 2, panneau de gauche). C\u2019est \xe0 dire que les diff\xe9rentes fonctionnalit\xe9s de l\u2019application n\u2019\xe9taient pas forc\xe9ment ind\xe9pendantes et surtout elles tournaient toutes sur la m\xeame machine ; celle que l\u2019on voulait toujours plus puissante.\nLa strat\xe9gie de micro-services consiste \xe0 construire chacune des fonctionnalit\xe9s - ou chacun des services - de mani\xe8re ind\xe9pendante des autres, par une \u201cpetite\u201d \xe9quipe autonome. Les \xe9quipes n\u2019ont qu\u2019\xe0 s\u2019accorder sur un standard de communication entre les services et \xe9ventuellement \xe0 le faire \xe9voluer progressivement. Chaque micro-service tourne ensuite sur un serveur d\xe9di\xe9 et peut \xeatre ind\xe9pendamment scalable et d\xe9ployable.  "),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Vocabulaire  ")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)(s.Z,{mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"Ind\xe9pendamment scalable",label:"Ind\xe9pendamment scalable",mdxType:"TabItem"},"S\u2019il y a une trop grande tension pour acc\xe9der \xe0 la base de donn\xe9es des utilisateurs par exemple et que ce service devient trop lent, on peut augmenter le nombre de machines d\xe9di\xe9es \xe0 ce service seulement et r\xe9partir la charge sans affecter les autres."),(0,i.kt)(o.Z,{value:"Ind\xe9pendamment d\xe9ployable",label:"Ind\xe9pendamment d\xe9ployable",mdxType:"TabItem"},"Si on am\xe9liore l\u2019algorithme de recommandation de contenu, on peut red\xe9ployer ce service seulement puis arr\xeater les serveurs qui font tourner l\u2019ancien algorithme progressivement ; comme ce service est ind\xe9pendant des autres, la seule pr\xe9caution \xe0 prendre est de s\u2019assurer que leur standard de communication est toujours valide.")))),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("h2",{parentName:"div",id:"class-dropdown"},"class: dropdown"),(0,i.kt)("p",{parentName:"div"},"The note body will be hidden!"))),(0,i.kt)("p",null,":::{admonition} Click here!\n:class: tip, dropdown\nHere's what's inside!\n:::"),(0,i.kt)("p",null,"Cette strat\xe9gie de microservices repr\xe9sente la scalabilit\xe9 horizontale. Toutefois, faire tourner le m\xeame service sur plusieurs serveurs, \xe7a implique de maintenir toutes ces machines et de s\u2019assurer qu\u2019elles fournissent toutes le m\xeame environnement au service en question, i.e. m\xeames librairies avec les m\xeames versions. Et c\u2019est l\xe0 que la conteneurisation devient un atout majeur. Pour chaque service il suffit d\u2019\xe9crire toutes les exigences de librairies dans un fichier, puis de lancer un conteneur Docker \xe0 partir de ce fichier.",(0,i.kt)("br",{parentName:"p"}),"\n","Au passage cela r\xe8gle un autre probl\xe8me pr\xe9sent\xe9 sur le panneau de droite de la Figure 2. Diff\xe9rentes applications install\xe9es sur un m\xeame serveur pouvaient avoir besoin des m\xeames librairies mais avec des versions diff\xe9rentes, qui elles-m\xeames pouvaient appeler diff\xe9rentes versions d\u2019autres librairies. Et les \xe9quipes techniques devaient trouver les moyens de les installer toutes de mani\xe8re concurrente et de s\u2019assurer que les bonnes versions \xe9taient appel\xe9es au bon moment. La conteneurisation enl\xe8ve tout simplement ce probl\xe8me.  "),(0,i.kt)("p",null,"En conclusion, ",(0,i.kt)("strong",{parentName:"p"},"k8s")," est un moyen unique et simple de g\xe9rer une myriade de micro-services interconnect\xe9s de mani\xe8re conteneuris\xe9e, c\u2019est un ",(0,i.kt)("strong",{parentName:"p"},"orchestrateur de conteneurs"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Figure 2",src:n(4701).Z,title:"Figure 2"})),(0,i.kt)("div",{style:{textAlign:"center",marginLeft:"9em",marginRight:"9em",marginBottom:"5em"}},"Figure 2 : Write some text here... This fig is too small, make it different."))}f.isMDXComponent=!0},4063:function(e,t,n){t.Z=n.p+"assets/images/Figure1-scalabilites-635f99c3421602777aef7d8886d3cc75.png"},4701:function(e,t,n){t.Z=n.p+"assets/images/Figure2-conteneurisation-05be0e48c070b150b99fa7752c9cd96f.png"}}]);